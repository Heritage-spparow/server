<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Invoice - Order <%= order.orderNumber %></title>
  <style type="text/css">
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #1a202c; background: #f7fafc; padding: 20px 0; }
    .invoice-container { max-width: 900px; margin: 0 auto; background: #ffffff; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); position: relative; }
    .invoice-container::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #ffffff; padding: 40px; position: relative; overflow: hidden; }
    .header::before { content: ''; position: absolute; top: -50%; right: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); animation: float 6s ease-in-out infinite; }
    @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(180deg); } }
    .header-content { position: relative; z-index: 2; }
    .brand-section { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px; }
    .brand { display: flex; align-items: center; gap: 12px; }
    .brand-logo { width: 50px; height: 50px; background: rgba(255, 255, 255, 0.25); border: 1px solid rgba(255, 255, 255, 0.18); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 900; }
    .brand-text { display: flex; flex-direction: column; }
    .brand-name { font-size: 28px; font-weight: 800; letter-spacing: -0.5px; }
    .brand-tagline { font-size: 14px; opacity: 0.85; font-weight: 400; }
    .invoice-meta { text-align: right; }
    .invoice-badge { display: inline-block; background: rgba(255, 255, 255, 0.25); border: 1px solid rgba(255, 255, 255, 0.18); padding: 8px 20px; border-radius: 50px; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
    .order-info { text-align: center; margin-top: 20px; }
    .order-number { font-size: 36px; font-weight: 900; margin-bottom: 8px; letter-spacing: -1px; }
    .order-date { font-size: 16px; opacity: 0.9; font-weight: 500; }
    .content { padding: 50px 40px; }
    .info-section { margin-bottom: 40px; }
    .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
    .info-card { background: #f7fafc; padding: 30px; border-radius: 16px; border: 1px solid rgba(226, 232, 240, 0.8); position: relative; }
    .info-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 2px 0 0 2px; }
    .info-title { font-size: 12px; font-weight: 700; color: #718096; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px; }
    .info-content { color: #1a202c; font-weight: 500; line-height: 1.6; }
    .info-content strong { font-weight: 700; }
    .status-section { background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); border: 1px solid rgba(103, 58, 183, 0.2); padding: 30px; border-radius: 16px; margin-bottom: 40px; }
    .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 25px; }
    .status-item { text-align: center; }
    .status-label { font-size: 11px; font-weight: 600; color: #718096; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; }
    .status-value { font-size: 18px; font-weight: 700; color: #1a202c; background: rgba(255, 255, 255, 0.25); padding: 8px 16px; border-radius: 50px; display: inline-block; min-width: 120px; }
    .items-section { margin-bottom: 40px; }
    .section-title { font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 25px; }
    .section-title::before { content: ''; width: 4px; height: 24px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 2px; }
    .items-container { background: #ffffff; border: 1px solid rgba(226, 232, 240, 0.8); border-radius: 16px; overflow: hidden; }
    .items-header { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: #ffffff; padding: 20px 30px; display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 20px; font-weight: 600; font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px; }
    .order-item { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 20px; padding: 25px 30px; border-bottom: 1px solid rgba(226, 232, 240, 0.8); align-items: center; }
    .order-item:last-child { border-bottom: none; }
    .item-name { font-size: 16px; font-weight: 600; color: #1a202c; margin-bottom: 8px; }
    .item-attributes { display: flex; gap: 8px; flex-wrap: wrap; }
    .attribute-tag { background: #f7fafc; color: #4a5568; padding: 4px 12px; border-radius: 50px; font-size: 12px; font-weight: 500; border: 1px solid rgba(226, 232, 240, 0.8); }
    .qty-badge { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: #ffffff; padding: 8px 16px; border-radius: 50px; font-weight: 600; font-size: 14px; display: inline-block; min-width: 40px; text-align: center; }
    .unit-price { font-size: 16px; font-weight: 500; color: #4a5568; }
    .total-amount { font-size: 18px; font-weight: 700; color: #1a202c; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
    .summary-section { background: #f7fafc; padding: 40px; border-radius: 16px; border: 1px solid rgba(226, 232, 240, 0.8); margin-bottom: 40px; }
    .summary-title { font-size: 22px; font-weight: 700; color: #1a202c; margin-bottom: 30px; text-align: center; }
    .summary-content { max-width: 400px; margin: 0 auto; }
    .summary-row { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid rgba(226, 232, 240, 0.8); font-size: 16px; }
    .summary-row:last-child { border-bottom: none; }
    .summary-row.total { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #ffffff; margin: 20px -20px -20px; padding: 25px 20px; border-radius: 12px; font-size: 20px; font-weight: 700; }
    .thank-you-section { background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); border: 1px solid rgba(255, 152, 0, 0.2); padding: 40px; border-radius: 16px; text-align: center; margin-bottom: 40px; }
    .thank-you-section h3 { font-size: 28px; font-weight: 800; color: #e65100; margin-bottom: 16px; }
    .thank-you-section p { font-size: 16px; color: #bf360c; font-weight: 500; line-height: 1.6; }
    .footer { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: #ffffff; padding: 40px; text-align: center; }
    .footer-content { max-width: 600px; margin: 0 auto; }
    .footer-links { display: flex; justify-content: center; gap: 30px; margin-bottom: 30px; }
    .footer-links a { color: rgba(255, 255, 255, 0.8); text-decoration: none; font-weight: 600; padding: 8px 16px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); }
    .footer-links a:hover { background: rgba(255, 255, 255, 0.1); color: #ffffff; }
    .contact-info { margin: 30px 0; padding: 25px; background: rgba(255, 255, 255, 0.1); border-radius: 12px; }
    .contact-info strong { font-size: 18px; display: block; margin-bottom: 12px; }
    .social-section { margin: 30px 0; }
    .social-links { display: flex; justify-content: center; gap: 15px; }
    .social-link { display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; background: rgba(255, 255, 255, 0.25); border: 1px solid rgba(255, 255, 255, 0.18); color: #ffffff; border-radius: 50%; text-decoration: none; font-weight: 600; }
    .social-link:hover { background: #ffffff; color: #1a202c; }
    .copyright { margin-top: 30px; padding-top: 25px; border-top: 1px solid rgba(255, 255, 255, 0.2); font-size: 14px; color: rgba(255, 255, 255, 0.7); line-height: 1.6; }
    @media (max-width: 768px) { .invoice-container { margin: 10px; border-radius: 16px; } .header { padding: 30px 25px 40px; } .content { padding: 30px 25px; } .brand-section { flex-direction: column; gap: 20px; text-align: center; } .invoice-meta { text-align: center; } .brand-name { font-size: 24px; } .order-number { font-size: 28px; } .info-grid { grid-template-columns: 1fr; gap: 20px; } .info-card { padding: 25px; } .status-grid { grid-template-columns: repeat(2, 1fr); gap: 20px; } .items-header, .order-item { grid-template-columns: 1fr; gap: 15px; text-align: center; } .items-header { display: none; } .order-item { padding: 20px; display: block; text-align: left; } .item-quantity, .item-price, .item-total { display: inline-block; margin: 5px 10px; } .summary-section { padding: 30px 25px; } .thank-you-section { padding: 30px 25px; } .footer { padding: 30px 25px; } .footer-links { flex-direction: column; gap: 15px; } .social-links { flex-wrap: wrap; } }
    @media (max-width: 480px) { .status-grid { grid-template-columns: 1fr; } .status-value { font-size: 16px; min-width: 100px; } .thank-you-section h3 { font-size: 22px; } }
  </style>
</head>
<body>
  <div class="invoice-container">
    <div class="header">
      <div class="header-content">
        <div class="brand-section">
          <div class="brand">
            <div class="brand-logo">üõçÔ∏è</div>
            <div class="brand-text">
              <div class="brand-name">eCom Store</div>
              <div class="brand-tagline">Your Premium Shopping Destination</div>
            </div>
          </div>
          <div class="invoice-meta">
            <div class="invoice-badge">Invoice</div>
          </div>
        </div>
        <div class="order-info">
          <div class="order-number">#<%= order.orderNumber %></div>
          <div class="order-date"><%= formattedDate %> at <%= formattedTime %></div>
        </div>
      </div>
    </div>
    <div class="content">
      <div class="info-section">
        <div class="info-grid">
          <div class="info-card">
            <div class="info-title">üë§ Bill To</div>
            <div class="info-content">
              <strong><%= user.fullName %></strong><br>
              <%= user.email %><br>
              <% if (user.phone) { %>
                <%= user.phone %><br>
              <% } %>
              Customer since <%= new Date(user.createdAt).getFullYear() %>
            </div>
          </div>
          <div class="info-card">
            <div class="info-title">üì¶ Ship To</div>
            <div class="info-content">
              <%= order.shippingAddress.address %><br>
              <%= order.shippingAddress.city %>, <%= order.shippingAddress.state %><br>
              <%= order.shippingAddress.postalCode %><br>
              <%= order.shippingAddress.country %>
            </div>
          </div>
        </div>
      </div>
      <div class="status-section">
        <div class="status-grid">
          <div class="status-item">
            <div class="status-label">üìã Order Status</div>
            <div class="status-value"><%= order.status.toUpperCase() %></div>
          </div>
          <div class="status-item">
            <div class="status-label">üí≥ Payment Method</div>
            <div class="status-value"><%= order.paymentMethod.toUpperCase() %></div>
          </div>
          <div class="status-item">
            <div class="status-label">‚úÖ Payment Status</div>
            <div class="status-value"><%= order.isPaid ? 'PAID' : 'PENDING' %></div>
          </div>
          <% if (order.trackingNumber) { %>
            <div class="status-item">
              <div class="status-label">üöö Tracking</div>
              <div class="status-value"><%= order.trackingNumber %></div>
            </div>
          <% } %>
        </div>
      </div>
      <div class="items-section">
        <h2 class="section-title">Order Items</h2>
        <div class="items-container">
          <div class="items-header">
            <div>Item Details</div>
            <div style="text-align: center;">Quantity</div>
            <div style="text-align: center;">Unit Price</div>
            <div style="text-align: center;">Total</div>
          </div>
          <% order.orderItems.forEach(item => { %>
            <div class="order-item">
              <div class="item-details">
                <div class="item-main">
                  <h4 class="item-name"><%= item.name %></h4>
                  <div class="item-attributes">
                    <% if (item.color) { %>
                      <span class="attribute-tag">Color: <%= item.color %></span>
                    <% } %>
                    <% if (item.size) { %>
                      <span class="attribute-tag">Size: <%= item.size %></span>
                    <% } %>
                  </div>
                </div>
              </div>
              <div class="item-quantity">
                <span class="qty-badge"><%= item.quantity %></span>
              </div>
              <div class="item-price">
                <span class="unit-price">$<%= item.price.toFixed(2) %></span>
              </div>
              <div class="item-total">
                <span class="total-amount">$<%= (item.price * item.quantity).toFixed(2) %></span>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
      <div class="summary-section">
        <h2 class="summary-title">üí∞ Order Summary</h2>
        <div class="summary-content">
          <div class="summary-row">
            <span>Subtotal (<%= order.orderItems.length %> <%= order.orderItems.length === 1 ? 'item' : 'items' %>)</span>
            <span>$<%= order.itemsPrice.toFixed(2) %></span>
          </div>
          <div class="summary-row">
            <span>Tax (8%)</span>
            <span><%= order.taxPrice.toFixed(2) %></span>
          </div>
          <div class="summary-row">
            <span>Shipping & Handling</span>
            <span><%= order.shippingPrice === 0 ? 'FREE' : '$' + order.shippingPrice.toFixed(2) %></span>
          </div>
          <div class="summary-row total">
            <span>Total Amount = </span>
            <span><%= order.totalPrice.toFixed(2) %></span>
          </div>
        </div>
      </div>
      <div class="thank-you-section">
        <h3>üéâ Thank You for Your Order!</h3>
        <p>We're excited to get your order to you as soon as possible. You'll receive a shipping confirmation email once your order is on its way. Your satisfaction is our priority!</p>
      </div>
    </div>
    <div class="footer">
      <div class="footer-content">
        <div class="footer-links">
          <a href="#">üì¶ Track Order</a>
          <a href="#">üîÑ Return Policy</a>
          <a href="#">üí¨ Support</a>
          <a href="#">‚ùì FAQ</a>
        </div>
        <div class="contact-info">
          <strong>eCom Store Customer Service</strong>
          üìß support@ecomstore.com | üìû 1-800-ECOM-HELP<br>
          Hours: Monday-Friday 9AM-9PM EST, Weekend 10AM-6PM EST
        </div>
        <div class="social-section">
          <div class="social-links">
            <a href="#" class="social-link" title="Facebook">f</a>
            <a href="#" class="social-link" title="Twitter">ùïè</a>
            <a href="#" class="social-link" title="Instagram">üì∑</a>
            <a href="#" class="social-link" title="LinkedIn">in</a>
          </div>
        </div>
        <div class="copyright">
          ¬© 2025 eCom Store. All rights reserved.<br>
          This email was sent to <%= user.email %>. Questions? Contact our support team.
        </div>
      </div>
    </div>
  </div>
</body>
</html>